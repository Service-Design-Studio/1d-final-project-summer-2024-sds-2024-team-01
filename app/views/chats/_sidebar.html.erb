<div class="sidebar col-4 border-right p-0" style="height: 100vh; overflow-y: auto;">
  <div class="dropdown p-3">
    <a class="inbox-dropdown dropdown-toggle" href="#" role="button" id="inboxFilterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      Inbox 
    </a>
    <ul class="dropdown-menu" aria-labelledby="inboxFilterDropdown">
      <li><a class="dropdown-item filter-option" href="#" data-filter="all">All</a></li>
      <li><a class="dropdown-item filter-option" href="#" data-filter="requests">My Requests</a></li>
      <li><a class="dropdown-item filter-option" href="#" data-filter="applications">Applications</a></li>
    </ul>
  </div>
  <div id="chat-list" class="list-group">
    <% if @chats.present? %>
      <% @chats.each do |chat| %>
        <a href="#" class="chat-preview list-group-item list-group-item-action d-flex align-items-center justify-content-between" data-chat-id="<%= chat.id %>" data-applicant-id="<%= chat.applicant_id %>" data-requester-id="<%= chat.requester_id %>" data-request-id="<%= chat.request.id %>">
          <div class="d-flex align-items-center">
            <div class="info">
              <h6 class="mb-1"><%= chat.applicant_id == current_user.id ? chat.requester.name : chat.applicant.name %></h6>
              <p class="mb-1"><%= chat.request.title %></p>
            </div>
          </div>
          <div class="d-flex flex-column align-items-end">
            <div class="time text-right mb-1">
              <% if chat.messages.any? %>
                <%= chat.messages.order(created_at: :desc).first.created_at.strftime("%d/%m") %>
              <% else %>
                No messages yet
              <% end %>
            </div>
            <img src="<%= chat.request.thumbnail %>" alt="Request Image" class="request-thumbnail">
          </div>
        </a>
      <% end %>
    <% else %>
      <p class="p-3">No chats available.</p>
    <% end %>
  </div>
</div>
